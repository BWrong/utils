!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).authTool={})}(this,(function(e){"use strict";var t={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.directiveName,r=void 0===n?"auth":n,i=t.hasAuth,o=void 0===i?function(){return!0}:i;e.directive(r,{inserted:function(e,t){var n;!o(t.value)&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}})}},n={},r="permission";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return e.filter((function(e){var a;return!!r(e,t)&&(null!==(a=e.meta)&&void 0!==a&&a.permission&&(n[e.meta.permission]=e,e.meta=o(e.meta,t[e.meta.permission])),e.children&&(e.children=i(e.children,t)),!0)}))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return t.map((function(r){var i,a;return r.url=r[n]&&(null===(i=e[r[n]])||void 0===i?void 0:i.path)||"",null!==(a=r.children)&&void 0!==a&&a.length&&(r.children=o(e,t,n)),r}))}function a(e,t){var n;return null===(n=e.meta)||void 0===n||!n.permission||!!t[e.meta.permission]}function u(e,t){return Object.assign(e,t)}function d(e,t){return Array.isArray(e)||(console.error("@bwrong/auth-tool/ganerAuthData: ".concat(t,"参数传入数据类型不正确，请传入Array数据类型")),!1)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}var v=Object.freeze({__proto__:null,convertToTree:function e(t){var n=t.data,r=void 0===n?[]:n,i=t.pid,o=void 0===i?0:i,a=t.children,u=void 0===a?"children":a,d=t.pidName,l=void 0===d?"parentId":d,c=t.idName,v=void 0===c?"id":c,f=[];return r.map((function(t){if(t[l]===o){var n=t[u]||[];t[u]=n.concat(e({data:r,pid:t[v],children:u,pidName:l,idName:v})),f.push(t)}})),f},getParentsFromArray:function e(t){var n,r=t.id,i=t.data,o=t.idName,a=void 0===o?"id":o,u=t.pidName,d=void 0===u?"parentId":u,l=t.result,v=void 0===l?[]:l,f=c(i);try{for(f.s();!(n=f.n()).done;){var s=n.value;s[a]===r&&(v.unshift(s),e({id:s[d],data:i,idName:a,pidName:d,result:v}))}}catch(e){f.e(e)}finally{f.f()}return v}}),f=function(e){var t=e.routes,l=void 0===t?[]:t,c=e.permissions,v=void 0===c?[]:c,f=e.authKey,s=void 0===f?r:f,h=e.checkAuth,m=void 0===h?a:h,p=e.mergeMeta,y=void 0===p?u:p;d(l,"routes"),d(v,"permissions");var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return e.reduce((function(e,n){return e[n[t]]=n,e}),{})}(v,s);return{authMap:g,routes:i(l,g,m,y),menus:o(n,v,s)}},s=t,h={ganerAuthData:f,authDirective:s,util:v};e.authDirective=s,e.default=h,e.ganerAuthData=f,e.util=v,Object.defineProperty(e,"__esModule",{value:!0})}));
