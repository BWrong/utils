!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).authTool={})}(this,(function(e){"use strict";function i(e,n,t,d){return void 0===e&&(e=[]),void 0===n&&(n={}),void 0===t&&(t=o),void 0===d&&(d=r),e.filter((function(e){var o;return!!t(e,n)&&((null===(o=e.meta)||void 0===o?void 0:o.permission)&&(u[e.meta.permission]=e,e.meta=d(e.meta,n[e.meta.permission])),e.children&&(e.children=i(e.children,n)),!0)}))}function n(e,i,o){return void 0===e&&(e={}),void 0===i&&(i=[]),void 0===o&&(o=d),i.map((function(r){var t,u;return r.url=r.path=r[o]&&(null===(t=e[r[o]])||void 0===t?void 0:t.path)||"",(null===(u=r.children)||void 0===u?void 0:u.length)&&(r.children=n(e,i,o)),r}))}var o=function(e,i){var n;return!(null===(n=e.meta)||void 0===n?void 0:n.permission)||!!i[e.meta.permission]},r=function(e,i){return Object.assign(e,i)};function t(e,i){return Array.isArray(e)||(console.error("@bwrong/auth-tool/ganerAuthData: "+i+"参数传入数据类型不正确，请传入Array数据类型"),!1)}var u={},d="permission",a=function(e){var a=e.routes,v=void 0===a?[]:a,s=e.permissions,l=void 0===s?[]:s,c=e.authKey,f=void 0===c?d:c,h=e.checkAuth,m=void 0===h?o:h,p=e.mergeMeta,y=void 0===p?r:p;t(v,"routes"),t(l,"permissions");var g=function(e,i){return void 0===e&&(e=[]),void 0===i&&(i=d),e.reduce((function(e,n){return e[n[i]]=n,e}),{})}(l,f);return{authMap:g,routes:i(v,g,m,y),menus:n(u,l,f)}},v={install:function(e,i){var n=void 0===i?{}:i,o=n.directiveName,r=void 0===o?"auth":o,t=n.hasAuth,u=void 0===t?function(e){return!0}:t;e.version.match(/^3/)&&e.directive(r,{mounted:function(e,i){var n;!u(i.value)&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}}),e.directive(r,{inserted:function(e,i){var n;!u(i.value)&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}})}};e.authDirective=v,e.ganerAuthData=a,Object.defineProperty(e,"__esModule",{value:!0})}));
