!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).authTool={})}(this,(function(e){"use strict";var i={install:function(e,i){var r=void 0===i?{}:i,n=r.directiveName,t=void 0===n?"auth":n,o=r.hasAuth,d=void 0===o?function(e){return!0}:o;e.version.match(/^3/)&&e.directive(t,{mounted:function(e,i){var r;!d(i.value)&&(null===(r=e.parentNode)||void 0===r||r.removeChild(e))}}),e.directive(t,{inserted:function(e,i){var r;!d(i.value)&&(null===(r=e.parentNode)||void 0===r||r.removeChild(e))}})}};var r={},n="permission";function t(e,i,n,o){return void 0===e&&(e=[]),void 0===i&&(i={}),void 0===n&&(n=d),void 0===o&&(o=a),e.filter((function(e){var d;return!!n(e,i)&&((null===(d=e.meta)||void 0===d?void 0:d.permission)&&(r[e.meta.permission]=e,e.meta=o(e.meta,i[e.meta.permission])),e.children&&(e.children=t(e.children,i)),!0)}))}function o(e,i,r){return void 0===e&&(e={}),void 0===i&&(i=[]),void 0===r&&(r=n),i.map((function(n){var t,d;return n.url=n.path=n[r]&&(null===(t=e[n[r]])||void 0===t?void 0:t.path)||"",(null===(d=n.children)||void 0===d?void 0:d.length)&&(n.children=o(e,i,r)),n}))}function d(e,i){var r;return!(null===(r=e.meta)||void 0===r?void 0:r.permission)||!!i[e.meta.permission]}function a(e,i){return Object.assign(e,i)}function u(e,i){return Array.isArray(e)||(console.error("@bwrong/auth-tool/ganerAuthData: "+i+"参数传入数据类型不正确，请传入Array数据类型"),!1)}var v=Object.freeze({__proto__:null,convertToTree:function e(i){var r=i.data,n=void 0===r?[]:r,t=i.pid,o=void 0===t?0:t,d=i.children,a=void 0===d?"children":d,u=i.pidName,v=void 0===u?"parentId":u,l=i.idName,c=void 0===l?"id":l,s=[];return n.map((function(i){if(i[v]===o){var r=i[a]||[];i[a]=r.concat(e({data:n,pid:i[c],children:a,pidName:v,idName:c})),s.push(i)}})),s},getParentsFromArray:function e(i){for(var r=i.id,n=i.data,t=i.idName,o=void 0===t?"id":t,d=i.pidName,a=void 0===d?"parentId":d,u=i.result,v=void 0===u?[]:u,l=0,c=n;l<c.length;l++){var s=c[l];s[o]===r&&(v.unshift(s),e({id:s[a],data:n,idName:o,pidName:a,result:v}))}return v}}),l=function(e){var i=e.routes,v=void 0===i?[]:i,l=e.permissions,c=void 0===l?[]:l,s=e.authKey,f=void 0===s?n:s,m=e.checkAuth,p=void 0===m?d:m,h=e.mergeMeta,N=void 0===h?a:h;u(v,"routes"),u(c,"permissions");var g=function(e,i){void 0===e&&(e=[]);void 0===i&&(i=n);return e.reduce((function(e,r){return e[r[i]]=r,e}),{})}(c,f);return{authMap:g,routes:t(v,g,p,N),menus:o(r,c,f)}},c=i;e.authDirective=c,e.ganerAuthData=l,e.util=v,Object.defineProperty(e,"__esModule",{value:!0})}));
