!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).authTool={})}(this,(function(e){"use strict";var i=function(e,i){var t;return!(null===(t=e.meta)||void 0===t?void 0:t.permission)||!!i[e.meta.permission]},t=function(e,i){return Object.assign(e,i)};function n(e,o,r,a,d){return void 0===e&&(e=[]),void 0===o&&(o={}),void 0===r&&(r=""),void 0===a&&(a=i),void 0===d&&(d=t),e.filter((function(e){var i;return!!a(e,o)&&((null===(i=e.meta)||void 0===i?void 0:i.permission)&&(e.path=e.path.match(/^\/.+/)?e.path:"".concat(r,"/").concat(e.path),u[e.meta.permission]=e,e.meta=d(e.meta,o[e.meta.permission])),e.children&&(e.children=n(e.children,o,e.path)),!0)}))}function o(e,i,t){return void 0===e&&(e={}),void 0===i&&(i=[]),void 0===t&&(t=a),i.map((function(n){var r,u;return n.url=n.path=n.url||n[t]&&(null===(r=e[n[t]])||void 0===r?void 0:r.path)||"",(null===(u=n.children)||void 0===u?void 0:u.length)&&(n.children=o(e,i,t)),n}))}function r(e,i){return Array.isArray(e)||(console.error("@bwrong/auth-tool/ganerAuthData: ".concat(i,"参数传入数据类型不正确，请传入Array数据类型")),!1)}var u={},a="permission",d=function(e){var d=e.routes,v=void 0===d?[]:d,c=e.permissions,s=void 0===c?[]:c,l=e.authKey,h=void 0===l?a:l,f=e.checkAuth,p=void 0===f?i:f,m=e.mergeMeta,y=void 0===m?t:m,g=e.prefix,A=void 0===g?"":g;r(v,"routes"),r(s,"permissions");var b=function(e,i){return void 0===e&&(e=[]),void 0===i&&(i=a),e.reduce((function(e,t){return e[t[i]]=t,e}),{})}(s,h);return{authMap:b,routes:n(v,b,A,p,y),menus:o(u,s,h)}},v={install:function(e,i){var t=void 0===i?{}:i,n=t.directiveName,o=void 0===n?"auth":n,r=t.hasAuth,u=void 0===r?function(e){return!0}:r;e.version.match(/^3/)?e.directive(o,{mounted:function(e,i){var t;!u(i.value)&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e))}}):e.directive(o,{inserted:function(e,i){var t;!u(i.value)&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e))}})}};e.authDirective=v,e.ganerAuthData=d,Object.defineProperty(e,"__esModule",{value:!0})}));
